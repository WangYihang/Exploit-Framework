import importlib


context = {
	"current": "Exploit-Framework",
	"instance": None,
}

while True:
	command_line = raw_input("[%s] >> " % (context["current"]))
	command_data = command_line.split(" ")
	command = command_data[0]

	print(context)

	if context["instance"] != None:
		# Dynmic function call
		print("Dynmic function call")
		getattr(context["instance"], 'show_info')()
		continue

	try:
		module = importlib.import_module("core.commands.%s" % (command))
		instance = module.Command(context)
		instance.run(command_data[1:])
	except Exception as e:
		print(repr(e))
		continue
