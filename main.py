import importlib
import inspect

context = {
}

def init():
	importlib.import_module("core.commands.framework").Command(context)


def get_prompt():
	path = inspect.getfile(context["instance"].__class__)
	name = path.split("/")[-3]
	vender = path.split("/")[-2]
	filename = path.split("/")[-1].split(".")[0]
	return "[%s] >> " % ("%s.%s.%s" % (name, vender, filename))
	
init()

while True:
	print(context)
	command_line = raw_input(get_prompt())
	command_data = command_line.split(" ")
	context["instance"].run(*command_data)


	# try:
	# 	getattr(context["instance"], command_data[0])(command_data[1:])
	# except Exception as e:
	# 	print(repr(e))

	# try:
	# 	module = importlib.import_module("core.commands.%s" % (command))
	# 	instance = module.Command(context)
	# 	instance.run(command_data[1:])
	# except Exception as e:
	# 	print(repr(e))
	# 	continue
